{% extends "layouts/base.html" %}

{% block title %}Detalle de Cachorro{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/cachorro.css') }}">
{% endblock %}

{% block navbar %}
{% set active_page = 'adopcion' %}
{% include 'components/topbar.html' %}
{% endblock %}

{% block content %}
<main class="main-content">
    <section class="detail-card">
        <img class="detail-img" src="{{ url_for('static', filename='images/Cachorro.png') }}" alt="Cachorro" />
        <div class="detail-info">
            <h2 class="detail-title">Cachorro</h2>
            <span class="detail-by"><i class="fa-solid fa-user"></i> Creado por @user</span>
            <ul class="detail-list">
                <li><b>Raza:</b> Schnauzer miniatura Gabriel PRI</li>
                <li><b>Edad:</b> 3–6 meses</li>
                <li><b>Sexo:</b> Hembra</li>
                <li><b>Tamaño adulto:</b> Pequeño (7–9 kg aprox.)</li>
                <li><b>Estado de salud:</b> Vacunado, desparasitado y en buen estado</li>
                <li><b>Carácter:</b> Juguetón, activo, inteligente y muy leal</li>
                <li><b>Requisitos para adopción:</b> Espacio seguro dentro de casa, tiempo disponible para juegos y
                    paseos diarios, compromiso con su educación y cuidados veterinarios</li>
                <li><b>Ubicación:</b> Barranquilla, Atlántico, barrio San Jose</li>
                <li><b>Contacto:</b> +57 3022163398</li>
            </ul>
            {% if is_authenticated %}
            <a class="cta" href="/formulario?pet=Cachorro" data-animate="true"
                data-loading-text="Preparando formulario..." data-animation-type="submit" data-delay="700"
                data-restore-delay="900">
                <i class="fa-solid fa-paw"></i> Postularme para adoptar
            </a>
            {% else %}
            <button class="cta cta-locked" onclick="showAuthModal('Cachorro', event)" data-animate="true"
                data-loading-text="Debes iniciar sesión..." data-animation-type="auth" data-delay="300"
                data-restore-delay="600">
                <i class="fa-solid fa-lock"></i> Iniciar Sesión para Adoptar
            </button>
            {% endif %}
        </div>
    </section>
</main>
{% endblock %}

{% block footer %}
<!-- Footer personalizado para página de cachorro -->
<footer class="footer">
    <div class="footer-inner">
        <div class="footer-brand"><i class="fa-solid fa-paw"></i> Adopt Me</div>
        <div class="footer-grid">
            <div>
                <h4>Contáctanos</h4>
                <a href="#"><i class="fa-solid fa-envelope"></i> Email</a>
                <a href="#"><i class="fa-brands fa-whatsapp"></i> WhatsApp</a>
                <a href="#"><i class="fa-brands fa-facebook"></i> Facebook</a>
            </div>
            <div>
                <h4>Adopción</h4>
                <a href="#">¿Cómo adoptar?</a>
                <a href="#">Requisitos</a>
                <a href="#">Historias felices</a>
            </div>
            <div>
                <h4>Fundaciones</h4>
                <a href="#">Unirse</a>
                <a href="#">Recursos</a>
                <a href="#">Eventos</a>
            </div>
            <div>
                <h4>Legal</h4>
                <a href="#">Términos</a>
                <a href="#">Privacidad</a>
                <a href="#">Ayuda</a>
            </div>
        </div>
    </div>
</footer>

<!-- Incluir componente de botón animado -->
{% block stylesheets %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/cachorro.css') }}">
{% endblock %}

{% block navbar %}
{% set active_page = 'adopcion' %}
{% include 'components/topbar.html' %}
{% endblock %}

{% block content %}
<main class="main-content">
    {% set pet = {
        'image': url_for('static', filename='images/Cachorro.png'),
        'alt': 'Cachorro',
        'name': 'Cachorro',
        'creator': 'Creado por @user',
        'attributes': [
            {'label': 'Raza', 'value': 'Schnauzer miniatura Gabriel PRI'},
            {'label': 'Edad', 'value': '3–6 meses'},
            {'label': 'Sexo', 'value': 'Hembra'},
            {'label': 'Tamaño adulto', 'value': 'Pequeño (7–9 kg aprox.)'},
            {'label': 'Estado de salud', 'value': 'Vacunado, desparasitado y en buen estado'},
            {'label': 'Carácter', 'value': 'Juguetón, activo, inteligente y muy leal'},
            {'label': 'Requisitos para adopción', 'value': 'Espacio seguro dentro de casa, tiempo disponible para juegos y paseos diarios, compromiso con su educación y cuidados veterinarios'},
            {'label': 'Ubicación', 'value': 'Barranquilla, Atlántico, barrio San Jose'},
            {'label': 'Contacto', 'value': '+57 3022163398'}
        ],
        'cta': {
            'url': '/formulario?pet=Cachorro',
            'text': 'Postularme para adoptar',
            'icon': 'fa-solid fa-paw',
            'loading_text': 'Preparando formulario...',
            'animation_type': 'submit',
            'delay': '700',
            'restore_delay': '900',
            'requires_auth': True,
            'locked_text': 'Inicia sesión para adoptar'
        }
    } %}

    {% include 'components/pet-detail.html' with pet=pet %}
</main>

{% include 'components/boton_animado.html' %}
{% include 'components/auth-modal.html' %}
{% endblock %}
        position: relative;
        overflow: hidden;
    }

    .auth-modal-content::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #e08c2b, #f4a261, #e76f51, #e08c2b);
        background-size: 200% 100%;
        animation: gradientShift 3s ease infinite;
    }

    @keyframes gradientShift {
        0% {
            background-position: 0% 50%;
        }

        50% {
            background-position: 100% 50%;
        }

        100% {
            background-position: 0% 50%;
        }
    }

    .auth-modal-icon {
        font-size: 4rem;
        color: #e08c2b;
        margin-bottom: 1.5rem;
        animation: bounceIn 0.6s ease-out 0.2s both;
    }

    @keyframes bounceIn {
        0% {
            transform: scale(0.3) rotate(-180deg);
            opacity: 0;
        }

        50% {
            transform: scale(1.05) rotate(0deg);
        }

        70% {
            transform: scale(0.9);
        }

        100% {
            transform: scale(1);
            opacity: 1;
        }
    }

    .auth-modal h3 {
        color: #2c3e50;
        margin-bottom: 0.5rem;
        font-size: 1.8rem;
        font-weight: 700;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    .auth-modal-subtitle {
        color: #e08c2b;
        font-size: 1rem;
        margin-bottom: 2rem;
        font-weight: 500;
    }

    .auth-modal p {
        margin-bottom: 2.5rem;
        color: #555;
        font-size: 1.1rem;
        line-height: 1.6;
    }

    .auth-modal p strong {
        color: #e08c2b;
        font-weight: 600;
    }

    .auth-modal-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 2rem;
    }

    .auth-modal-btn {
        padding: 1rem 2rem;
        border: none;
        border-radius: 15px;
        cursor: pointer;
        text-decoration: none;
        font-weight: 600;
        font-size: 1rem;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        min-width: 140px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
    }

    .auth-modal-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        transition: left 0.5s;
    }

    .auth-modal-btn:hover::before {
        left: 100%;
    }

    .auth-modal-btn.primary {
        background: linear-gradient(135deg, #e08c2b, #f4a261);
        color: white;
        box-shadow:
            0 8px 25px rgba(224, 140, 43, 0.3),
            0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .auth-modal-btn.primary:hover {
        background: linear-gradient(135deg, #d67b1a, #e08c2b);
        transform: translateY(-2px);
        box-shadow:
            0 12px 35px rgba(224, 140, 43, 0.4),
            0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .auth-modal-btn.primary:active {
        transform: translateY(0);
    }

    .auth-modal-btn.secondary {
        background: linear-gradient(145deg, #f8f9fa, #e9ecef);
        color: #6c757d;
        border: 2px solid #dee2e6;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    }

    .auth-modal-btn.secondary:hover {
        background: linear-gradient(145deg, #e9ecef, #dee2e6);
        transform: translateY(-1px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        color: #495057;
    }

    .auth-modal-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: none;
        border: none;
        font-size: 1.5rem;
        color: #adb5bd;
        cursor: pointer;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
    }

    .auth-modal-close:hover {
        background: rgba(224, 140, 43, 0.1);
        color: #e08c2b;
        transform: rotate(90deg);
    }
</style>

<script>
    // Función para mostrar el modal de autenticación
    function showAuthModal(petName, event) {
        // Prevenir comportamiento por defecto
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }

        // Crear modal si no existe
        let modal = document.getElementById('authModal');
        if (!modal) {
            modal = document.createElement('div');
            modal.id = 'authModal';
            modal.className = 'auth-modal';
            modal.innerHTML = `
            <div class="auth-modal-content">
                <button class="auth-modal-close" onclick="closeAuthModal()" title="Cerrar">
                    <i class="fa-solid fa-times"></i>
                </button>
                <div class="auth-modal-icon">
                    <i class="fa-solid fa-paw"></i>
                </div>
                <h3>¡Hola, futuro adoptante!</h3>
                <p class="auth-modal-subtitle">Tu nuevo mejor amigo te está esperando</p>
                <p>Para adoptar a <strong id="modalPetName">${petName}</strong>, necesitas crear una cuenta o iniciar sesión. ¡Es rápido y completamente gratis!</p>
                <div class="auth-modal-buttons">
                    <a href="/registro" class="auth-modal-btn primary">
                        <i class="fa-solid fa-user-plus"></i> Crear Cuenta
                    </a>
                    <a href="/iniciar-sesion" class="auth-modal-btn primary">
                        <i class="fa-solid fa-sign-in-alt"></i> Iniciar Sesión
                    </a>
                    <button onclick="closeAuthModal()" class="auth-modal-btn secondary">
                        <i class="fa-solid fa-times-circle"></i> Ahora no
                    </button>
                </div>
            </div>
        `;
            document.body.appendChild(modal);
        } else {
            document.getElementById('modalPetName').textContent = petName;
        }

        modal.style.display = 'block';

        // Efecto de apertura suave
        setTimeout(() => {
            modal.style.opacity = '1';
        }, 10);

        // Cerrar modal al hacer clic fuera
        modal.onclick = function (event) {
            if (event.target === modal) {
                closeAuthModal();
            }
        }

        // Enfocar el primer botón para accesibilidad
        setTimeout(() => {
            const firstBtn = modal.querySelector('.auth-modal-btn');
            if (firstBtn) firstBtn.focus();
        }, 300);

        return false; // Prevenir navegación
    }

    // Función para cerrar el modal con animación
    function closeAuthModal() {
        const modal = document.getElementById('authModal');
        if (modal) {
            const content = modal.querySelector('.auth-modal-content');
            if (content) {
                content.style.animation = 'modalContentOut 0.3s cubic-bezier(0.55, 0, 1, 0.45) forwards';
                modal.style.animation = 'modalFadeOut 0.3s ease-out 0.1s forwards';

                setTimeout(() => {
                    modal.style.display = 'none';
                    // Resetear animaciones para la próxima vez
                    content.style.animation = '';
                    modal.style.animation = '';
                }, 400);
            } else {
                modal.style.display = 'none';
            }
        }
    }

    // Cerrar modal con tecla Escape
    document.addEventListener('keydown', function (event) {
        if (event.key === 'Escape') {
            closeAuthModal();
        }
    });
</script>
{% endblock %}