<nav class="navbar">
    <div class="navbar__container">
        <a href="{{ url_for('Pagina_Principal') }}" class="navbar__logo">Adopt Me</a>
        
        <ul class="navbar__menu">
            <li><a href="{{ url_for('Mascotas_Alias') }}" class="navbar__link">Mascotas</a></li>
            <li><a href="{{ url_for('Pagina_Fundacion') }}" class="navbar__link">Fundaciones</a></li>
        </ul>

        {% if user_authenticated %}
        <div class="navbar__user-menu">
            <div class="navbar__user-info">
                <span class="navbar__user-name">
                    <i class="fa-solid fa-user-circle"></i>
                    {{ user_name }}
                </span>
                <div class="navbar__user-dropdown">
                    <a href="/perfil" class="navbar__dropdown-item">
                        <i class="fa-solid fa-user"></i> Mi perfil
                    </a>
                    <a href="/mis-postulaciones" class="navbar__dropdown-item">
                        <i class="fa-solid fa-heart"></i> Mis postulaciones
                    </a>
                    <hr class="navbar__dropdown-divider">
                    <a href="/logout" class="navbar__dropdown-item navbar__dropdown-item--logout">
                        <i class="fa-solid fa-sign-out-alt"></i> Cerrar sesión
                    </a>
                </div>
            </div>
        </div>
        {% else %}
        <div class="navbar__auth-buttons">
            <a href="{{ url_for('Iniciar_Sesion') }}" class="navbar__btn navbar__btn--login">Iniciar sesión</a>
            <a href="{{ url_for('Registro_Usuario') }}" class="navbar__btn navbar__btn--register">Registro</a>
        </div>
        {% endif %}
    </div>
</nav>

<style>
/* Estilos para usuario autenticado en navbar */
.navbar__user-menu {
    position: relative;
}

.navbar__user-info {
    position: relative;
    display: inline-block;
}

.navbar__user-name {
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(224, 140, 43, 0.1);
    color: #e08c2b;
    padding: 8px 15px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.navbar__user-name:hover {
    background: rgba(224, 140, 43, 0.2);
    border-color: #e08c2b;
}

.navbar__user-name i {
    font-size: 1.1rem;
}

.navbar__user-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    background: white;
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    min-width: 200px;
    padding: 10px 0;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.3s ease;
    z-index: 1000;
    border: 1px solid #e9ecef;
}

.navbar__user-info:hover .navbar__user-dropdown {
    opacity: 1;
    visibility: visible;
    transform: translateY(5px);
}

.navbar__dropdown-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 20px;
    color: #495057;
    text-decoration: none;
    font-size: 0.9rem;
    transition: all 0.2s ease;
}

.navbar__dropdown-item:hover {
    background-color: #f8f9fa;
    color: #e08c2b;
}

.navbar__dropdown-item--logout {
    color: #dc3545;
}

.navbar__dropdown-item--logout:hover {
    background-color: #fff5f5;
    color: #dc3545;
}

.navbar__dropdown-divider {
    margin: 8px 20px;
    border: 0;
    border-top: 1px solid #e9ecef;
}

.navbar__dropdown-item i {
    width: 16px;
    text-align: center;
}

/* Responsive */
@media (max-width: 768px) {
    .navbar__user-name {
        padding: 6px 12px;
        font-size: 0.8rem;
    }
    
    .navbar__user-dropdown {
        min-width: 180px;
        right: -10px;
    }
}
</style>

<script>
// Cerrar dropdown al hacer clic fuera
document.addEventListener('click', function(event) {
    const userMenu = document.querySelector('.navbar__user-menu');
    if (userMenu && !userMenu.contains(event.target)) {
        // Opcional: cerrar dropdown manualmente si implementas toggle
    }
});
</script>